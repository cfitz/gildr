(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{33:function(e,t,n){"use strict";n.d(t,"b",function(){return a}),n.d(t,"c",function(){return r}),n.d(t,"a",function(){return o});var a="AUTH_REQUEST",r="AUTH_SUCCESS",o="AUTH_FAILURE"},36:function(e,t,n){"use strict";n.d(t,"b",function(){return a}),n.d(t,"a",function(){return r});var a="LIST_GUILDS",r="GUILDS_FOUND"},5452:function(e,t,n){e.exports=n(5610)},5610:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(24),c=n.n(o),i=n(31),l=n(42),s=n(29),u=n(32),m=n(167),p=n(169),d=n(16);function h(e,t){return function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e,a=arguments.length>1?arguments[1]:void 0,r=a.type,o=a.payload,c=t[r];return c?c(n,o):n}}var b=n(36);var f,g=h([],Object(d.a)({},b.a,function(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0],(arguments.length>1?arguments[1]:void 0).guilds}));var v,O=h({},(f={},Object(d.a)(f,"FIND_TOPIC",function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(s.a)({},e)}),Object(d.a)(f,"TOPIC_FOUND",function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];var e=arguments.length>1?arguments[1]:void 0;return Object(s.a)({},e)}),f)),E=n(33);var j=h({token:localStorage.getItem("token"),error:null},(v={},Object(d.a)(v,E.c,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return Object(s.a)({},e,{token:t})}),Object(d.a)(v,E.a,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return Object(s.a)({},e,{error:t})}),v)),y=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e,n){return t.reduce(function(e,t){return t(e,n)},e)}}(Object(u.combineReducers)({guilds:g,topic:O,auth:j})),k=n(23),w=n.n(k),x=n(25),C=n(114),S=n.n(C),M=function(e){var t={name:e.name,password:e.password};return S.a.post("".concat("http://0.0.0.0:8080","/login"),t).then(function(e){return e.data})},I=function(){var e=localStorage.getItem("token");if(e){var t={headers:{Authorization:"Bearer ".concat(e)}};return S.a.get("".concat("http://0.0.0.0:8080","/v1/guilds"),t).then(function(e){return e.data})}},N=w.a.mark(T);function T(e){var t,n,a,r,o,c;return w.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return t=e.payload,n=t.name,a=t.password,i.prev=1,i.next=4,Object(x.b)(M,{name:n,password:a});case 4:return r=i.sent,o=r.token,i.next=8,Object(x.c)({type:E.c,payload:o});case 8:localStorage.setItem("token",o),i.next=24;break;case 11:i.prev=11,i.t0=i.catch(1),i.t1=i.t0.status,i.next=500===i.t1?16:401===i.t1?18:20;break;case 16:return c="Internal Server Error",i.abrupt("break",21);case 18:return c="Invalid credentials",i.abrupt("break",21);case 20:c="Something went wrong";case 21:return i.next=23,Object(x.c)({type:E.a,payload:c});case 23:localStorage.removeItem("token");case 24:case"end":return i.stop()}},N,this,[[1,11]])}var A=w.a.mark(U);function U(){var e;return w.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(x.b)(I);case 3:return e=t.sent,t.next=6,Object(x.c)({type:b.a,payload:e});case 6:t.next=12;break;case 8:return t.prev=8,t.t0=t.catch(0),t.next=12,Object(x.c)({type:"GUILDS_ERROR",err:t.t0});case 12:case"end":return t.stop()}},A,this,[[0,8]])}var D=w.a.mark(_),L=w.a.mark(F);function _(){return w.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(x.d)(b.b,U);case 2:case"end":return e.stop()}},D,this)}function F(){return w.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(x.d)(E.b,T);case 2:case"end":return e.stop()}},L,this)}var P=w.a.mark(R);function R(){return w.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(x.a)([F(),_()]);case 2:case"end":return e.stop()}},P,this)}var B=function(e){var t=Object(p.a)(),n=[t],a=[u.applyMiddleware.apply(void 0,n)],r=m.composeWithDevTools.apply(void 0,a),o=Object(u.createStore)(y,e,r);return Object(s.a)({},o,{runSaga:t.run(R)})}(),G=document.getElementById("root");(function(){var e=n(5611).default;c.a.render(r.a.createElement(l.a,{store:B},r.a.createElement(i.a,null,r.a.createElement(e,null))),G)})()},5611:function(e,t,n){"use strict";n.r(t);var a=n(39),r=n(40),o=n(44),c=n(41),i=n(43),l=n(0),s=n.n(l),u=n(13),m=n(79),p=n.n(m),d=Object(u.createMuiTheme)({palette:{primary:{light:"#003e68",main:"#005995",dark:"#337aaa"},secondary:{light:"#f5ff66",main:"#bfd730",dark:"#8ba600"},dark:{light:"#4f4f4f",main:"#272727",dark:"#000000"}},typography:{useNextVariants:!0}});var h=function(e){return function(t){return s.a.createElement(u.MuiThemeProvider,{theme:d},s.a.createElement(p.a,null),s.a.createElement(e,t))}},b=n(16),f=n(31),g=n(80),v=n.n(g),O=n(81),E=n.n(O),j=n(66),y=n.n(j),k=n(35),w=n.n(k),x=n(47),C=n.n(x),S=n(65),M=n.n(S),I=n(42),N=Object(u.withStyles)(function(e){return{link:{color:"inherit"}}})(Object(I.b)(function(e){return{token:e.auth.token}})(function(e){var t=e.token,n=e.classes,a=t?s.a.createElement("div",null," You are logged in."):s.a.createElement(f.c,{to:"/login",className:n.link},"Login");return s.a.createElement(w.a,{className:n.title,variant:"h6",color:"inherit",noWrap:!0},a)})),T=n(82),A=n.n(T),U=function(e){function t(){var e,n;Object(a.a)(this,t);for(var r=arguments.length,i=new Array(r),l=0;l<r;l++)i[l]=arguments[l];return(n=Object(o.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(i)))).state={anchorEl:null,mobileMoreAnchorEl:null},n.handleProfileMenuOpen=function(e){n.setState({anchorEl:e.currentTarget})},n.handleMenuClose=function(){n.setState({anchorEl:null}),n.handleMobileMenuClose()},n.handleMobileMenuOpen=function(e){n.setState({mobileMoreAnchorEl:e.currentTarget})},n.handleMobileMenuClose=function(){n.setState({mobileMoreAnchorEl:null})},n}return Object(i.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.state,t=e.anchorEl,n=e.mobileMoreAnchorEl,a=this.props.classes,r=Boolean(t),o=Boolean(n),c=s.a.createElement(M.a,{anchorEl:t,anchorOrigin:{vertical:"top",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},open:r,onClose:this.handleMenuClose},s.a.createElement(C.a,{onClick:this.handleMenuClose},"Profile"),s.a.createElement(C.a,{onClick:this.handleMenuClose},"My account")),i=s.a.createElement(M.a,{anchorEl:n,anchorOrigin:{vertical:"top",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},open:o,onClose:this.handleMobileMenuClose},s.a.createElement(C.a,null),s.a.createElement(C.a,null));return s.a.createElement("div",{className:a.root},s.a.createElement(v.a,{position:"static"},s.a.createElement(E.a,null,s.a.createElement(y.a,{classes:{colorInherit:a.menuButton},color:"inherit","aria-label":"Go To Frontpage"}),s.a.createElement(w.a,{className:a.title,variant:"h6",color:"inherit",noWrap:!0},s.a.createElement(f.b,{className:a.title,to:"/"},"Gildr")),s.a.createElement("div",{className:a.grow}),s.a.createElement("div",{className:a.sectionDesktop},s.a.createElement(N,null)),s.a.createElement("div",{className:a.sectionMobile},s.a.createElement(y.a,{"aria-haspopup":"true",onClick:this.handleMobileMenuOpen,color:"inherit"},s.a.createElement(A.a,null))))),c,i)}}]),t}(s.a.Component),D=Object(u.withStyles)(function(e){var t,n;return n={root:{width:"100%"},grow:{flexGrow:1},menuButton:{marginLeft:-12,marginRight:e.spacing.unit,padding:4,backgroundColor:e.palette.primary.main,"&:hover":{backgroundColor:e.palette.primary.dark}},title:(t={display:"none"},Object(b.a)(t,e.breakpoints.up("sm"),{display:"block"}),Object(b.a)(t,"textDecoration","none"),Object(b.a)(t,"color","inherit"),t)},Object(b.a)(n,"grow",{flex:"1 1 auto"}),Object(b.a)(n,"sectionDesktop",Object(b.a)({display:"none"},e.breakpoints.up("md"),{display:"flex"})),Object(b.a)(n,"sectionMobile",Object(b.a)({display:"flex"},e.breakpoints.up("md"),{display:"none"})),n})(U),L=n(46),_=n(67),F=n.n(_),P=n(63),R=n.n(P),B=n(64),G=n.n(B),z=n(83),W=n.n(z),H=n(36),J=function(e){function t(){return Object(a.a)(this,t),Object(o.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(i.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){this.props.dispatch({type:H.b})}},{key:"render",value:function(){var e=this.props,t=e.guilds,n=e.classes;return s.a.createElement(F.a,{className:n.grid,container:!0,direction:"column",justify:"center",alignItems:"center",spacing:16},s.a.createElement(F.a,{item:!0,xs:12},s.a.createElement(R.a,{className:n.root},t.map(function(e){return s.a.createElement(G.a,{key:e.id,alignItems:"flex-start",component:f.b,to:"/g/".concat(e.id)},s.a.createElement(W.a,{primary:e.name,secondary:s.a.createElement(s.a.Fragment,null,e.description)}))}))))}}]),t}(l.Component),q=Object(u.withStyles)(function(e){return{grid:{marginTop:4*e.spacing.unit},root:{width:"100%",backgroundColor:e.palette.background.paper,paddingTop:4*e.spacing.unit},inline:{display:"inline"}}})(Object(I.b)(function(e){return{guilds:e.guilds}})(J)),Q=function(e){return s.a.createElement(q,null)},V=n(29),Y=n(69),K=n(33),X=n(27),Z=n(116),$=function(e){function t(e){var n;return Object(a.a)(this,t),(n=Object(o.a)(this,Object(c.a)(t).call(this,e))).state={name:"",password:""},n.onChange=n.onChange.bind(Object(Y.a)(n)),n.onSubmit=n.onSubmit.bind(Object(Y.a)(n)),n}return Object(i.a)(t,e),Object(r.a)(t,[{key:"onChange",value:function(e,t){var n=t.target.value;this.setState(Object(b.a)({},e,n))}},{key:"onSubmit",value:function(){var e=this.state,t=e.name,n=e.password;this.props.dispatch(function(e,t){return{type:K.b,payload:{name:e,password:t}}}(t,n))}},{key:"render",value:function(){var e=this.props,t=e.classes;e.error;return e.token?s.a.createElement(L.a,{to:"/"}):s.a.createElement(X.b,{container:!0,justify:"center",className:t.root},s.a.createElement(X.c,{className:t.padding},s.a.createElement("div",{className:t.margin},s.a.createElement(X.b,{container:!0,spacing:8,alignItems:"center"},s.a.createElement(X.b,{item:!0},s.a.createElement(Z.a,null)),s.a.createElement(X.b,{item:!0,md:!0,sm:!0,xs:!0},s.a.createElement(X.d,{id:"name",label:"Username",fullWidth:!0,autoFocus:!0,required:!0,value:this.state.name,onChange:this.onChange.bind(this,"name")}))),s.a.createElement(X.b,{container:!0,spacing:8,alignItems:"flex-end"},s.a.createElement(X.b,{item:!0},s.a.createElement(Z.b,null)),s.a.createElement(X.b,{item:!0,md:!0,sm:!0,xs:!0},s.a.createElement(X.d,{label:"Password",type:"password",autoComplete:"current-password",onChange:this.onChange.bind(this,"password")}))),s.a.createElement(X.b,{container:!0,justify:"center",style:{marginTop:"10px"}},s.a.createElement(X.a,{variant:"outlined",color:"primary",style:{textTransform:"none"},onClick:this.onSubmit},"Login")))))}}]),t}(l.PureComponent),ee=Object(u.withStyles)(function(e){return{margin:{margin:2*e.spacing.unit},padding:{padding:e.spacing.unit},root:{padding:e.spacing.unit,paddingTop:4*e.spacing.unit}}})(Object(I.b)(function(e,t){var n=e.auth;return Object(V.a)({},t,{auth:n})})($)),te=function(e){return s.a.createElement(ee,null)},ne=n(26),ae=(Object(ne.a)({basename:""}),Object(u.withStyles)(function(e){return{}})(function(e){var t=e.classes;return s.a.createElement("main",{className:t.root},s.a.createElement(L.d,null,s.a.createElement(L.b,{exact:!0,path:"/",component:Q}),s.a.createElement(L.b,{path:"/login",component:te})))})),re=function(e){function t(){return Object(a.a)(this,t),Object(o.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(i.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.props.classes;return s.a.createElement("div",{className:e.root},s.a.createElement(D,null),s.a.createElement(ae,null))}}]),t}(l.Component);t.default=h(Object(u.withStyles)(function(e){return{root:{textAlign:"center"}}})(re))}},[[5452,1,2]]]);
//# sourceMappingURL=main.f42bfda7.chunk.js.map